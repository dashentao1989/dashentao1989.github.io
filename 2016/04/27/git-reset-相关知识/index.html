<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="生活在于折腾！"><title>git reset 相关知识 | CoffeeTao的技术生活</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/4.1.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.2/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/2.2.3/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">git reset 相关知识</h1><a id="logo" href="/.">CoffeeTao的技术生活</a><p class="description">生活在于折腾...</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">git reset 相关知识</h1><div class="post-meta">Apr 27, 2016<script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><div class="post-content"><h3 id="Definitions"><a href="#Definitions" class="headerlink" title="Definitions"></a>Definitions</h3><p>首先，让我们来解释几个定义.<br>First, let’s define a few terms.</p>
<p><strong> HEAD（头）</strong><br>指向当前branch最顶端的一个commit，该分支上一次commit后的节点<br>This is an alias for the tip of the current branch, which is themost recent commit you have made to that branch.</p>
<p><strong> Index（索引）</strong><br>The index, 也可以被认为是staging area（暂存区）,是一堆将在下一次commit中提交的文件，提交之后它就是 HEAD的父节点. （译注：Git add添加的文件）<br>The index, also known as the staging area, is the set of filesthat will become the next commit. It is also the commit thatwill become HEAD’s parent.</p>
<p><strong> Working Copy（工作副本）</strong><br>当前工作目录下的文件，（译注：一般指，有修改，没有git add，没有git commit的文件）<br>This is the term for the current set of files you’re working onin your file system.</p>
<h3 id="Reset"><a href="#Reset" class="headerlink" title="Reset"></a>Reset</h3><p>如果你仔细研究reset命令本身就知道，它本身做的事情就是重置HEAD(当前分支的版本顶端）到另外一个commit。假设我们有一个分支（名称本身无所谓，所以我们就简单称为”super-duper-feature”分支吧），图形化表示如下：<br><img src="http://images0.cnblogs.com/blog2015/737565/201505/182225251979460.png" alt=""><br>如果我们执行：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset HEAD</span><br></pre></td></tr></table></figure></p>
<p>任何事情都不会发生，这是因为我们告诉GIT重置这个分支到HEAD，而这个正是它现在所在的位置。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset HEAD~<span class="number">1</span></span><br></pre></td></tr></table></figure></p>
<p>当我们再执行上面的命令时（HEAD~1是“the commit right before HEAD”的别名，或者说：put differently “HEAD’s parent”），我们的分支将会如下所示:<br><img src="http://images0.cnblogs.com/blog2015/737565/201505/182229495415187.png" alt=""><br>如果我们执行git reset HEAD~2,则意味着将HEAD从顶端的commit往下移动两个更早的commit。</p>
<h4 id="Parameters"><a href="#Parameters" class="headerlink" title="Parameters"></a>Parameters</h4><p> –soft<br> –soft参数告诉Git重置HEAD到另外一个commit，但也到此为止。如果你指定–soft参数，Git将停止在那里而什么也不会根本变化。这意味着index,working copy都不会做任何变化，所有的在original HEAD和你重置到的那个commit之间的所有变更集都放在stage(index)区域中。<br> <img src="http://images0.cnblogs.com/blog2015/737565/201505/182237338854646.png" alt=""></p>
<p> –hard<br> –hard参数将会blow out everything.它将重置HEAD返回到另外一个commit(取决于~12的参数），重置index以便反映HEAD的变化，并且重置working copy也使得其完全匹配起来。这是一个比较危险的动作，具有破坏性，数据因此可能会丢失！如果真是发生了数据丢失又希望找回来，那么只有使用：git reflog命令了。makes everything match the commit you have reset to.你的所有本地修改将丢失。如果我们希望彻底丢掉本地修改但是又不希望更改branch所指向的commit，则执行git reset –hard = git reset –hard HEAD. i.e. don’t change the branch but get rid of all local changes.另外一个场景是简单地移动branch从一个到另一个commit而保持index/work区域同步。这将确实令你丢失你的工作，因为它将修改你的work tree！<br> <img src="http://images0.cnblogs.com/blog2015/737565/201505/182238305101646.png" alt=""></p>
<p> –mixed(default)<br> –mixed是reset的默认参数，也就是当你不指定任何参数时的参数。它将重置HEAD到另外一个commit,并且重置index以便和HEAD相匹配，但是也到此为止。working copy不会被更改。所有该branch上从original HEAD（commit）到你重置到的那个commit之间的所有变更将作为local modifications保存在working area中，（被标示为local modification or untracked via git status)，但是并未staged的状态，你可以重新检视然后再做修改和commit:<br> <img src="http://images0.cnblogs.com/blog2015/737565/201505/182238202609380.png" alt=""></p>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://yoursite.com/2016/04/27/git-reset-相关知识/" data-id="cipsazpau000glx679pke0j7p" class="article-share-link">分享到</a><div class="tags"><a href="/tags/android/">android</a><a href="/tags/git/">git</a></div><div class="post-nav"><a href="/2016/04/29/Android-CountDownTimer-使用时遇到的坑/" class="pre">Android CountDownTimer 使用时遇到的坑</a><a href="/2016/04/27/gerrit-push遇到change-Id丢失/" class="next">gretti push 遇到change_id missing</a></div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://yoursite.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/感悟/" style="font-size: 15px;">感悟</a> <a href="/tags/android/" style="font-size: 15px;">android</a> <a href="/tags/设计模式/" style="font-size: 15px;">设计模式</a> <a href="/tags/杂谈/" style="font-size: 15px;">杂谈</a> <a href="/tags/Pacelable/" style="font-size: 15px;">Pacelable</a> <a href="/tags/Serializable/" style="font-size: 15px;">Serializable</a> <a href="/tags/vim/" style="font-size: 15px;">vim</a> <a href="/tags/生活/" style="font-size: 15px;">生活</a> <a href="/tags/源码/" style="font-size: 15px;">源码</a> <a href="/tags/gradle/" style="font-size: 15px;">gradle</a> <a href="/tags/gretti/" style="font-size: 15px;">gretti</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/proguard/" style="font-size: 15px;">proguard</a> <a href="/tags/adbd/" style="font-size: 15px;">adbd</a> <a href="/tags/小朋友/" style="font-size: 15px;">小朋友</a> <a href="/tags/java/" style="font-size: 15px;">java</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/06/23/读java并发编程实战-part-one/">读java并发编程实战: part one</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/23/Proxy代理模式/">Proxy代理模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/21/git-tag标签/">git tag标签</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/17/build-gradle管理/">build.gradle管理</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/15/proguard-那些事/">proguard 那些事</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/12/打开超级adbd引起的Logcat异常/">打开超级adbd引起的Logcat异常</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/05/24/CEO-COO-CTO-CFO-到底是什么鬼/">CEO COO CTO CFO ...到底是什么鬼</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/05/19/Vim使用心得/">Vim使用心得</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/05/17/assembleRelease-SimException异常/">assembleRelease SimException异常</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/05/12/gitignore注意事项/">gitignore注意事项</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://github.com/dashentao1989" title="github" target="_blank">github</a><ul></ul><a href="http://blog.csdn.net/dashentao1989" title="csdn blog" target="_blank">csdn blog</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">CoffeeTao的技术生活.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>